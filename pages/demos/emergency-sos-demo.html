<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency SOS Demo - Rakshita</title>
    <link rel="stylesheet" href="../../assets/css/perfect-dark-theme.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    
    
</head>
<body>
    <div class="demo-container">
        <div class="header">
            <h1>üö® Emergency SOS</h1>
            <p>Test the emergency calling system - Works on both mobile and laptop</p>
        </div>
        
        <div class="sos-main">
            <button class="sos-button-large" onclick="activateEmergencySOS()">
                <i class="fas fa-exclamation-triangle"></i>
                <span>EMERGENCY</span>
                <small>Press to Activate</small>
            </button>
            
            <div class="device-info">
                <div class="device-type" id="device-type">
                    üì± Detected Device: <span id="device-name">Loading...</span>
                </div>
                <p id="device-description">Checking device capabilities...</p>
            </div>
        </div>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">üì±</div>
                <h3>Mobile Devices</h3>
                <p>Automatically opens phone dialer with emergency numbers. Calls 112, 100, 108, and your personal contacts.</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">üíª</div>
                <h3>Laptops & Desktops</h3>
                <p>Shows emergency numbers with copy-to-clipboard functionality. Use your phone to call the displayed numbers.</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">üìç</div>
                <h3>Location Sharing</h3>
                <p>Automatically captures and shares your precise GPS location with emergency services and contacts.</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">‚è±Ô∏è</div>
                <h3>5-Second Countdown</h3>
                <p>Prevents accidental activation with a 5-second countdown. Cancel anytime before calls are made.</p>
            </div>
        </div>
        
        <div class="emergency-numbers">
            <div class="emergency-number" onclick="makeEmergencyCall('112', 'Emergency Services')">
                <i class="fas fa-ambulance"></i>
                <div>
                    <strong>Emergency Services</strong>
                    <span>112 - Universal Emergency</span>
                </div>
            </div>
            
            <div class="emergency-number" onclick="makeEmergencyCall('100', 'Police')">
                <i class="fas fa-shield-alt"></i>
                <div>
                    <strong>Police</strong>
                    <span>100 - Law Enforcement</span>
                </div>
            </div>
            
            <div class="emergency-number" onclick="makeEmergencyCall('108', 'Ambulance')">
                <i class="fas fa-plus-circle"></i>
                <div>
                    <strong>Ambulance</strong>
                    <span>108 - Medical Emergency</span>
                </div>
            </div>
            
            <div class="emergency-number" onclick="makeEmergencyCall('101', 'Fire Department')">
                <i class="fas fa-fire"></i>
                <div>
                    <strong>Fire Department</strong>
                    <span>101 - Fire Emergency</span>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 3rem;">
            <a href="../../index.html" class="back-btn">
                <i class="fas fa-arrow-left"></i>
                Back to Main App
            </a>
        </div>
    </div>

    <!-- Include the emergency system -->
    <script src="../../assets/js/script.js"></script>

    <script>
        // Initialize demo
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üö® Emergency SOS Demo Loaded');
            
            // Detect device type
            detectDeviceType();
            
            // Initialize emergency system
            if (typeof initializeEmergencySystem === 'function') {
                initializeEmergencySystem();
            }
        });
        
        function detectDeviceType() {
            const deviceNameElement = document.getElementById('device-name');
            const deviceDescElement = document.getElementById('device-description');
            
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (isMobile) {
                deviceNameElement.textContent = 'Mobile Device';
                deviceDescElement.textContent = 'Emergency calls will automatically open your phone dialer. The system will call emergency services and your personal contacts.';
            } else {
                deviceNameElement.textContent = 'Desktop/Laptop';
                deviceDescElement.textContent = 'Emergency numbers will be displayed for you to call manually on your phone. Numbers can be copied to clipboard for easy dialing.';
            }
        }
        
        // Fallback functions if main script not loaded
        if (typeof activateEmergencySOS !== 'function') {
            window.activateEmergencySOS = function() {
                alert('üö® EMERGENCY SOS ACTIVATED!\n\nIn the full app, this would:\n1. Start 5-second countdown\n2. Get your GPS location\n3. Call emergency services\n4. Notify your contacts\n\nThis is a demo - no actual calls made.');
            };
        }
        
        if (typeof makeEmergencyCall !== 'function') {
            window.makeEmergencyCall = function(number, service) {
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                
                if (isMobile) {
                    // On mobile, try to open dialer
                    window.location.href = `tel:${number}`;
                } else {
                    // On desktop, show number
                    const modal = document.createElement('div');
                    modal.style.cssText = `
                        position: fixed;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        background: rgba(0,0,0,0.8);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        z-index: 10000;
                    `;
                    
                    modal.innerHTML = `
                        <div style="background: white; padding: 2rem; border-radius: 16px; text-align: center; max-width: 400px; color: #1f2937;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üìû</div>
                            <h3>Call ${service}</h3>
                            <div style="font-size: 2rem; font-weight: bold; color: #ef4444; margin: 1rem 0; padding: 1rem; background: #fef2f2; border-radius: 8px;">
                                ${number}
                            </div>
                            <p style="margin-bottom: 2rem; color: #6b7280;">Use your phone to call this number</p>
                            <div style="display: flex; gap: 1rem; justify-content: center;">
                                <button onclick="navigator.clipboard.writeText('${number}').then(() => alert('Number copied!')).catch(() => alert('Copy failed'))" style="background: #3b82f6; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer;">
                                    Copy Number
                                </button>
                                <button onclick="this.closest('div').parentElement.remove()" style="background: #6b7280; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer;">
                                    Close
                                </button>
                            </div>
                        </div>
                    `;
                    
                    document.body.appendChild(modal);
                }
            };
        }
    </script>
</body>
</html>